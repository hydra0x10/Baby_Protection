# 婴儿房智能监控
 Team project

### 简介

本产品设计了一套多功能的婴儿房监测系统，包含视频监测、环境监测、远程控制、智能报警等功能。

### 功能

- 视频监控：图像传输
- 环境检测：温度湿度含氧量、烟雾及远程报警
- 智能控制：控制房间灯光、空调等设备远程开关
- 图像识别：通过云台移动监测婴儿、OpenCV心率监控（待完成）

### 硬件选择

 - Cortex-A9开发板：采用三星Exynos 4412处理器，连接USB摄像头后用于视频采集、处理和发送

    Arduino单片机：用于连接各类传感器将采集到的数据通过串口转USB发送至Cortex-A9开发板

 - 传感器：DHT-11温湿度传感器、MQ-2烟雾传感器、LED灯

### 软件框架

**Server**

- socketInit（）初始化一个套接字、carmera_Init()初始化摄像头
- 接受客户端连接后，执行doConnect（）函数

- 创建发送图片线程，发送图片线程执行函数void *sendImg(void * arg)
- 创建发送温湿度线程，发送温湿度线程执行函数 void *send_Humi_Temp(void * arg) 
- 创建蜂鸣器报警函数，蜂鸣器报警函数 void *pwm_buzz(void *arg)
- 接受客户端命令，switch（）case{} 进行命令识别。
- 客户端断开连接后，将flag置为-1，所有子线程退出，重复至等待客户端连接处

**Client**

- 等待远程服务器启动
- 用户点击进入按钮，按钮转到槽，在槽函数中创建socket对象，然后通过IP地址和端口号找到目标主机与目标主机建立连接。关闭首页打开功能页
- 客户端与服务器连接后。客户端实时显示当前房间内的温湿度
- 点击开启监控按钮，即向服务器发送监控开启命令请求，服务器端根据客户端的请求打开摄像头
- 客户端接收到服务器传来的数据后先根据事先制定的通信协议对读到的数据包进行解析，根据数据前五位判断是图像包还是温湿度包，然后执行对应的成员函数将数据显示到客户端
- 当房间内有害气体超标时蜂鸣器报警并实时反馈到客户端
- 同样客户端可以通过向服务器发送指令的方式实现远程房间内的灯光控制

### 使用方法

​	服务端运行start.sh脚本，客户端运行Client.exe